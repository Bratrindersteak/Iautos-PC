var PersonalPublich={};PersonalPublich.PICUPPERLIMIT=30,PersonalPublich.PICLOWERLIMIT=2,PersonalPublich.currentYear=(new Date).getFullYear(),PersonalPublich.currentMonth=(new Date).getMonth(),PersonalPublich.checkLists=["ppCarLocation","ppCarSeries","ppBrandYear","ppTripDistance","ppExpectedPrice","ppCarColorLists","ppCarPictureList","ppOwnerDescription","ppPhoneNumber","ppCode"],PersonalPublich.cleanLists=["ppCarLocation","ppCarSeries","ppBrandYear"],PersonalPublich.areaLocation=[],PersonalPublich.areaLocationId=[],PersonalPublich.areaLocationIdSubstitute=[],PersonalPublich.carSeriesId=[],PersonalPublich.carSeriesIdSubstitute=[],PersonalPublich.carSeriesModelId=[],PersonalPublich.carSeriesName=[],PersonalPublich.uploadImages=[],PersonalPublich.uploadImagesHash=[],PersonalPublich.uploadImagesSrc=[],PersonalPublich.registrationTime=[],PersonalPublich.registrationYear="",PersonalPublich.purchaseDate="",$(document).ready(function(){var e=document.getElementById("noCarBrand"),a=document.getElementById("ppBrandYear"),s=(document.getElementById("ppBrandYearBtn"),document.getElementById("ppBrandYearLists")),i=(s.getElementsByTagName("li"),document.getElementById("ppCarLocationBtn"),document.getElementById("ppCarSeriesBtn"),document.getElementById("ppCarSeriesBoxes"),document.getElementById("ppCarBrandBox"),document.getElementById("ppCarBrandLetterBox").getElementsByTagName("li"),document.getElementById("ppCarBrandLogoBox").getElementsByTagName("li"),document.getElementById("ppCarStyleBox")),r=(i.getElementsByTagName("span"),document.getElementById("ppCarYearBox")),t=(r.getElementsByTagName("li"),document.getElementById("ppCarSeriesBox"),document.getElementById("ppCarSeriesYearBox").getElementsByTagName("li"),document.getElementById("ppCarSeriesSeriesBox").getElementsByTagName("li"),document.getElementById("ppCarColorLists").getElementsByTagName("li"),document.getElementById("ppSendCodeBtn"),document.getElementById("ppResendCodeBtn"));document.getElementById("fastLoginCode");for($("#ppCarBrandBox .brand-lists").eq(0).show(),$("#ppCarBrandLetterBox li").eq(0).addClass("active"),PersonalPublich.i=0;PersonalPublich.i<PersonalPublich.cleanLists.length;PersonalPublich.i+=1)$("#"+PersonalPublich.cleanLists[PersonalPublich.i]).val("");$("#ppCarPictureList").on("click",".status",function(){var e=this,a=$(e).hasClass("loading");a||($(e).addClass("cover").removeClass("setting-cover").html("<i>封面</i>"),$(e).parent().addClass("cover-pic").siblings("li").removeClass("cover-pic").find(".status").removeClass("cover").empty())}),$("#ppCarPictureList").on("mouseenter",".status",function(){var e=this,a=$(e).hasClass("loading"),s=$(e).hasClass("cover");a||$(e).addClass("moving").siblings(".close").show(),a||s||$(e).addClass("setting-cover").html("<i>设为封面</i>")}).on("mouseleave",".status",function(){var e=this,a=$(e).hasClass("cover");$(e).removeClass("setting-cover moving"),a?$(e).html("<i>封面</i>"):$(e).empty()}).on("mouseleave",".real",function(){$(this).find(".close").hide()}),$("#ppCarPictureList").on("click",".real .close",function(){var e=$(this).parent().index();if(l.files.splice(e,1),PersonalPublich.uploadImages.splice(e,1),PersonalPublich.uploadImagesHash.splice(e,1),PersonalPublich.uploadImagesSrc.splice(e,1),0===$("#ppCarPictureList .real").length){var a,s="",i=["· 左前","· 正前","· 侧面","· 正后","· 中控","· 座椅"];for(a=0;a<6;a+=1)s+='<li><div class="image upload-default-'+(a+1)+'"></div><h6 class="img-name">'+i[a]+"</h6></li>";$("#ppUploadPic").html("点击上传车辆实拍照片"),$("#ppCarPictureList").empty().append(s)}else $("#ppUploadPic .count").text(PersonalPublich.uploadImages.length),"block"!==$("#ppCarPictureListErrorInfo").parent().css("display")||$("#ppCarPictureListErrorInfo").text().match(PersonalPublich.PICLOWERLIMIT)||$("#ppCarPictureListErrorInfo").parent().hide();$(this).parent().remove()});var l=Qiniu.uploader({runtimes:"html5, flash, silverlight, html4",browse_button:"ppUploadPic",uptoken_url:"/index.php?c=qiniu&a=uptoken",get_new_uptoken:!1,domain:"http://qimg.iautos.cn",container:"ppCarPictures",filters:{mime_types:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}],max_file_size:"8mb",prevent_duplicates:!0},flash_swf_url:"/static2013/js/plupload/Moxie.swf",silverlight_xap_url:"/static2013/js/plupload/Moxie.xap",max_retries:3,dragdrop:!0,drop_element:"ppCarPictureList",chunk_size:"4mb",auto_start:!0,prevent_duplicates:!0,init:{FilesAdded:function(e,a){var s,i,r="";for(s=0;s<l.files.length;s+=1)l.files[s].index=Number(s),l.files[s].ordinal=Number(s)+1;for(i=0;i<a.length;i+=1)PersonalPublich.uploadImages.length+i<PersonalPublich.PICUPPERLIMIT?r+='<li class="real pc"><i class="close" data-index="'+a[i].index+'" style="display:none"></i><div class="status loading">0%</div><div class="image"><img src="" width="100%" /></div></li>':l.files.splice(l.files.length-1,1);if(0===$("#ppCarPictureList .real").length&&$("#ppCarPictureList").empty(),$("#ppCarPictureList").append(r),PersonalPublich.uploadImages.length+a.length>PersonalPublich.PICUPPERLIMIT){$("#ppCarPictureListErrorInfo").text("最多上传"+PersonalPublich.PICUPPERLIMIT+"张图片,已为您自动删除多余图片.").parent().show();setTimeout(function(){$("#ppCarPictureListErrorInfo").parent().hide()},3e3)}},BeforeUpload:function(e,a){},UploadProgress:function(e,a){$("#ppCarPictureList .pc").eq(a.index).find(".loading").text(a.percent+"%")},FileUploaded:function(e,a,s){var i=e.getOption("domain"),r=JSON.parse(s).hash,t=i+"/"+JSON.parse(s).key;PersonalPublich.uploadImages.length<PersonalPublich.PICUPPERLIMIT&&(PersonalPublich.uploadImagesHash.push(r),PersonalPublich.uploadImagesSrc.push(t)),PersonalPublich.uploadImages.push(a),$("#ppCarPictureList .pc").eq(a.index).find(".status").removeClass("loading").text(""),$("#ppCarPictureList .pc").eq(a.index).find("img").prop("src",t+"-mudiumpic"),$("#ppUploadPic").html('已成功添加<i class="count">'+PersonalPublich.uploadImages.length+"</i>张照片"),$("#ppCarPictureListErrorInfo").text().match(PersonalPublich.PICLOWERLIMIT)?$("#ppCarPictureList .real").length>=PersonalPublich.PICLOWERLIMIT&&!$("#ppCarPictureListErrorInfo").text().match(PersonalPublich.PICUPPERLIMIT)&&$("#ppCarPictureListErrorInfo").parent().hide():$("#ppCarPictureListErrorInfo").text().match(PersonalPublich.PICUPPERLIMIT)||$("#ppCarPictureListErrorInfo").parent().hide(),PersonalPublich.uploadImages.length===PersonalPublich.PICUPPERLIMIT&&$("#ppCarPictureListErrorInfo").text().match(PersonalPublich.PICUPPERLIMIT)&&$("#ppCarPictureListErrorInfo").parent().hide(),1===l.total.queued&&$("#ppCarPictureList").dragsort({dragSelector:".real",dragEnd:function(){},dragBetween:!1,placeHolderTemplate:"<li style='border:1px dashed #cccccc'></li>"})},Error:function(e,a,s,i){console.log(e),console.log(a),console.log(a.code),console.log(s),console.log(i),a.code===-600?$("#ppCarPictureListErrorInfo").text("每张图片最大8M").parent().show():a.code===-602&&$("#ppCarPictureListErrorInfo").text("请勿上传重复图片").parent().show()}}});$("#ppCarLocationBtn").on("click",function(){var e=this;"none"===$("#ppAreaSelectBox").css("display")?($(e).addClass("unfold"),$("#ppAreaSelectCitiesBox, #ppAreaSelectCountiesBox").hide(),$("#ppAreaSelectBox, #ppAreaSelectProvincesBox").show()):($(e).removeClass("unfold"),$("#ppAreaSelectBox, #ppAreaSelectCitiesBox, #ppAreaSelectCountiesBox").hide(),$("#ppAreaSelectProvincesBox").show())}),$("#ppAreaSelectBox").parent().on("blur",function(){"block"===$("#ppAreaSelectBox").css("display")&&($("#ppAreaSelectBox, #ppAreaSelectCitiesBox, #ppAreaSelectCountiesBox").hide(),$("#ppAreaSelectProvincesBox").show(),$("#ppCarLocationBtn").removeClass("unfold"))}),$("#ppAreaSelectProvincesBox, #ppAreaSelectCitiesBox").on("click","li",function(){var e,a,s,i=this,r=$(i).data("pinyin"),t=sessionStorage.getItem(r);$(i).parent().hasClass("provinces")?(PersonalPublich.areaLocationIdSubstitute[0]=i.id,PersonalPublich.areaLocation[0]=$(i).text()):(PersonalPublich.areaLocationIdSubstitute[1]=i.id,PersonalPublich.areaLocation[1]=$(i).text()),$(i).parent().hasClass("provinces")?(a="Provinces",s="Cities"):(a="Cities",s="Counties"),t?$("#ppAreaSelect"+s+"Box .inside-citys-wrap").empty().append(t):"1"===i.id||"2"===i.id||"3"===i.id||"4"===i.id?ajaxFunctions.getData(IautosPC.config.address.pp_areaCities,"&city_id="+(Number(i.id)+827),!1,function(e){if(1===e.status){var a="";for(city in e.data)a+='<li id="'+e.data[city].id+'" data-pinyin ="'+e.data[city].earea+'"><span class="c">'+e.data[city].area+"</span></li>";$("#ppAreaSelect"+s+"Box .inside-citys-wrap").empty().append(a),sessionStorage.setItem(r,a)}else PersonalPublich.areaLocationId[0]=PersonalPublich.areaLocationIdSubstitute[0],$("#ppCarLocation").val(PersonalPublich.areaLocation.join(" ").replace(/\s$/,"")),$("#ppAreaSelectBox, #ppAreaSelectCitiesBox").hide(),$("#ppAreaSelectProvincesBox").show(),$("#ppCarLocationBtn").removeClass("unfold"),"block"===$("#ppCarLocationErrorInfo").parent().css("display")&&$("#ppCarLocationErrorInfo").parent().hide()},function(e,a,s){console.log(e),console.log(a),console.log(s)}):ajaxFunctions.getData(IautosPC.config.address.pp_areaCities,"&city_id="+i.id,!1,function(a){if(1===a.status){var i="";for(city in a.data)i+='<li id="'+a.data[city].id+'" data-pinyin ="'+a.data[city].earea+'"><span class="c">'+a.data[city].area+"</span></li>";$("#ppAreaSelect"+s+"Box .inside-citys-wrap").empty().append(i),sessionStorage.setItem(r,i)}else{for(e=0;e<PersonalPublich.areaLocationIdSubstitute.length;e+=1)PersonalPublich.areaLocationId[e]=PersonalPublich.areaLocationIdSubstitute[e],PersonalPublich.areaLocationIdSubstitute[e]="";$("#ppCarLocation").val(PersonalPublich.areaLocation.join(" ").replace(/\s$/,"")),$("#ppAreaSelectBox, #ppAreaSelectCitiesBox").hide(),$("#ppAreaSelectProvincesBox").show(),$("#ppCarLocationBtn").removeClass("unfold"),"block"===$("#ppCarLocationErrorInfo").parent().css("display")&&$("#ppCarLocationErrorInfo").parent().hide(),PersonalPublich.areaLocation.splice(0,PersonalPublich.areaLocation.length)}},function(){}),$("#ppAreaSelect"+a+"Box").hide(),$("#ppAreaSelect"+s+"Box").show()}),$("#ppAreaSelectCountiesBox").on("click","li",function(){var e;for(PersonalPublich.areaLocation[2]=$(this).text(),PersonalPublich.areaLocationIdSubstitute[2]=this.id,e=0;e<PersonalPublich.areaLocationIdSubstitute.length;e+=1)PersonalPublich.areaLocationId[e]=PersonalPublich.areaLocationIdSubstitute[e],PersonalPublich.areaLocationIdSubstitute[e]="";$("#ppCarLocation").val(PersonalPublich.areaLocation.join(" ")),$("#ppAreaSelectBox, #ppAreaSelectCountiesBox").hide(),$("#ppAreaSelectProvincesBox").show(),$("#ppCarLocationBtn").removeClass("unfold"),"block"===$("#ppCarLocationErrorInfo").parent().css("display")&&$("#ppCarLocationErrorInfo").parent().hide(),PersonalPublich.areaLocation.splice(0,PersonalPublich.areaLocation.length)}),$("#ppAreaSelectBox").on("click",".return",function(){var e=$(this).data("this"),a=$(this).data("return");$("#"+e).hide(),$("#"+a).show()}),$("#ppCarSeriesBtn").on("click",function(){$("#ppCarSeriesBoxes, #ppCarBrandBox, #alphaLayer").show(),"block"===$("#ppAreaSelectBox").css("display")&&($("#ppAreaSelectBox, #ppAreaSelectCitiesBox, #ppAreaSelectCountiesBox").hide(),$("#ppAreaSelectProvincesBox").show(),$("#ppCarLocationBtn").removeClass("unfold")),"block"!==$("#ppBrandYearLists").css("display")&&"block"!==$("#ppBrandMonthLists").css("display")||($("#ppBrandYearLists, #ppBrandMonthLists").hide(),$("#ppBrandYearBtn").removeClass("unfold"))}),$("#ppCarBrandLetterBox").on("click","li",function(){var e=this,a=$(e).hasClass("active"),s=$(e).text();a||$(e).addClass("active").siblings("li").removeClass("active"),$("#ppCarBrandBox .letter-"+s).show().siblings(".brand-lists").hide()}),$("#ppCarBrandBox").on("click",".brand-lists-wrap li",function(){ajaxFunctions.postData(IautosPC.config.address.pp_getSeries,"brand_name="+this.id,!1,function(e){var a,s,i="",r=e.length;for(a=0;a<r;a+=1){var t=e[a].car_series.length;for(i+='<li><h4 class="t">'+e[a].car_mfrs.iautos_name+'</h4><div class="style-lists-wrap">',s=0;s<t;s+=1)i+='<span id="'+e[a].car_series[s].id+'" class="n">'+e[a].car_series[s].name_show+"</span>";i+="</div></li>"}$("#ppCarStyleBox .style-lists").empty().append(i),$("#ppCarBrandBox").hide(),$("#ppCarStyleBox").show()},function(){}),PersonalPublich.carSeriesName[0]=$(this).text().trim(),PersonalPublich.carSeriesIdSubstitute[0]=this.id}),$("#ppCarStyleBox").on("click",".n",function(){var e=this;ajaxFunctions.postData(IautosPC.config.address.pp_getYears,"series_id="+e.id,!1,function(a){var s,i="",r=a.length;if(1===r)PersonalPublich.purchaseDate=Number(a[0].year),ajaxFunctions.postData(IautosPC.config.address.pp_getTrims,"series_id="+e.id+"&year_id="+a[0].year,!1,function(e){var a,s,i="",r="",t=[];for(a=0;a<e.year_list.length;a+=1){i+='<li data-year="series'+e.year_list[a]+'">'+e.year_list[a]+"款</li>",r+='<div class="type-lists-shell series'+e.year_list[a]+'"><h3 class="t">'+e.year_list[a]+'款</h3><ul class="type-lists-wrap"><li class="line"></li>';for(s in e.model[e.year_list[a]])r+='<li id="'+e.model[e.year_list[a]][s].id+'" data-model="'+e.model[e.year_list[a]][s].model_id+'" class="i"><span class="n">'+e.model[e.year_list[a]][s].displacement+" "+("1"===e.model[e.year_list[a]][s].is_turbo?"T":"L")+" "+e.model[e.year_list[a]][s].transmission_name+" "+e.model[e.year_list[a]][s].name+'</span><span class="p">￥'+e.model[e.year_list[a]][s].new_price+"万</span></li>";r+="</ul></div>",t.push(e.year_list[a])}1===t.length&&(i='<li class="active" data-year="series'+e.year_list[0]+'">'+e.year_list[0]+"款</li>"),$("#ppCarSeriesYearBox").empty().append(i),$("#ppCarSeriesSeriesBox").empty().append(r),$("#ppCarStyleBox").hide(),$("#ppCarSeriesBox").show()},function(){}),PersonalPublich.carSeriesName[2]=a[0].year+"款",PersonalPublich.carSeriesIdSubstitute[2]=a[0].year;else{for(s=0;s<r;s+=1)i+='<li id="'+e.id+'" data-sid="'+a[s].year+'"><span class="n">'+a[s].year+"</span></li>";$("#ppCarYearBox .year-lists").empty().append(i),$("#ppCarStyleBox").hide(),$("#ppCarYearBox").show()}},function(){}),PersonalPublich.carSeriesName[1]=$(e).text(),PersonalPublich.carSeriesIdSubstitute[1]=e.id}),$("#ppCarYearBox").on("click","li",function(){var e=this;PersonalPublich.purchaseDate=Number($(e).text()),ajaxFunctions.postData(IautosPC.config.address.pp_getTrims,"series_id="+e.id+"&year_id="+$(e).data("sid"),!1,function(e){var a,s,i="",r="",t=[];for(a=0;a<e.year_list.length;a+=1){i+='<li data-year="series'+e.year_list[a]+'">'+e.year_list[a]+"款</li>",r+='<div class="type-lists-shell series'+e.year_list[a]+'"><h3 class="t">'+e.year_list[a]+'款</h3><ul class="type-lists-wrap"><li class="line"></li>';for(s in e.model[e.year_list[a]])r+='<li id="'+e.model[e.year_list[a]][s].id+'" data-model="'+e.model[e.year_list[a]][s].model_id+'" class="i"><span class="n">'+e.model[e.year_list[a]][s].displacement+" "+("1"===e.model[e.year_list[a]][s].is_turbo?"T":"L")+" "+e.model[e.year_list[a]][s].transmission_name+" "+e.model[e.year_list[a]][s].name+'</span><span class="p">￥'+e.model[e.year_list[a]][s].new_price+"万</span></li>";r+="</ul></div>",t.push(e.year_list[a])}1===t.length&&(i='<li class="active" data-year="series'+e.year_list[0]+'">'+e.year_list[0]+"款</li>"),$("#ppCarSeriesYearBox").empty().append(i),$("#ppCarSeriesSeriesBox").empty().append(r),$("#ppCarYearBox").hide(),$("#ppCarSeriesBox").show()},function(){}),PersonalPublich.carSeriesName[2]=$(e).text()+"款",PersonalPublich.carSeriesIdSubstitute[2]=$(e).data("sid")}),$("#ppCarSeriesYearBox").on("click","li",function(){if($(this).hasClass("active"))return!1;var e=$(this).data("year");$(this).addClass("active").siblings("li").removeClass("active"),$("#ppCarSeriesSeriesBox").find("."+e).show().siblings().hide()}),$("#ppCarSeriesSeriesBox").on("click","li",function(){var e;for("block"===$("#ppCarSeriesErrorInfo").parent().css("display")&&$("#ppCarSeriesErrorInfo").parent().hide(),PersonalPublich.carSeriesName[3]=$(this).find(".n").text(),PersonalPublich.carSeriesIdSubstitute[3]=this.id,PersonalPublich.carSeriesModelId[0]=$(this).data("model"),e=0;e<PersonalPublich.carSeriesIdSubstitute.length;e+=1)PersonalPublich.carSeriesId[e]=PersonalPublich.carSeriesIdSubstitute[e];if($("#ppCarSeries").val(PersonalPublich.carSeriesName.join(" ")),$("#ppBrandYear").val(""),$("#ppCarSeriesBoxes, #ppCarSeriesBox, #alphaLayer").hide(),PersonalPublich.currentYear-PersonalPublich.purchaseDate<=4)for(e=PersonalPublich.purchaseDate-1;e<=PersonalPublich.currentYear;e+=1)PersonalPublich.registrationYear+='<li class="selectable"><span class="year">'+e+"年</span></li>";else for(e=PersonalPublich.purchaseDate-1;e<=PersonalPublich.purchaseDate+4;e+=1)PersonalPublich.registrationYear+='<li class="selectable"><span class="year">'+e+"年</span></li>";$("#ppBrandYearLists").empty().html(PersonalPublich.registrationYear).siblings("div").removeClass("disabled"),$("#noCarBrand").removeAttr("disabled checked"),PersonalPublich.carSeriesName.splice(0,PersonalPublich.carSeriesName.length),PersonalPublich.registrationYear=""}),$("#ppCarSeriesBoxes").on("click",".return-btn",function(){var e=$(this).data("this"),a=$(this).data("return");$("#"+e).hide(),"ppCarYearBox"===a&&0===$("#"+a).find(".year-lists li").length?$("#ppCarStyleBox").show():$("#"+a).show()}),$("#ppCarSeriesBoxes").on("click",".choose-boxes-close",function(){$("#ppCarBrandBox .brand-lists").eq(0).show().siblings(".brand-lists").hide(),$("#ppCarBrandLetterBox li").eq(0).addClass("active").siblings("li").removeClass("active"),$("#ppCarSeriesBoxes, #ppCarBrandBox, #ppCarStyleBox, #ppCarYearBox, #ppCarSeriesBox, #alphaLayer").hide()}),$("#ppBrandYearLists").parent().on("blur",function(){"block"!==$("#ppBrandYearLists").css("display")&&"block"!==$("#ppBrandMonthLists").css("display")||($("#ppBrandYearLists, #ppBrandMonthLists").hide(),$("#ppBrandYearBtn").removeClass("unfold"))}),$("#ppBrandYearBtn").on("click",function(){if(!s.innerHTML)return!1;var e=this,a=$(e).hasClass("disabled"),i=s.style.display;a||("none"===i&&"none"===$("#ppBrandMonthLists").css("display")?($("#ppBrandYearLists").show(),$(e).addClass("unfold")):($("#ppBrandYearLists, #ppBrandMonthLists").hide(),$(e).removeClass("unfold")))}),$("#ppBrandYearLists").on("click",".selectable",function(){if(PersonalPublich.registrationTime[0]=$(this).text(),$("#ppBrandYearLists").hide(),$("#ppBrandMonthLists li").each(function(){var e=this;$(e).hasClass("selectable")||$(e).addClass("selectable")}),$(this).text().match(PersonalPublich.currentYear)){var e;for(e=PersonalPublich.currentMonth;e<$("#ppBrandMonthLists li").length;e+=1)$("#ppBrandMonthLists li").eq(e+1).removeClass("selectable")}$("#ppBrandMonthLists").show()}),$("#ppBrandMonthLists").on("click",".selectable",function(){var e=$("#ppBrandYearErrorInfo").parent();PersonalPublich.registrationTime[1]=$(this).text(),$("#ppBrandYear").val(PersonalPublich.registrationTime.join(" ")),$("#ppBrandMonthLists").hide(),$("#ppBrandYearBtn").removeClass("unfold"),"block"===e.css("display")&&e.hide(),PersonalPublich.registrationTime.splice(0,PersonalPublich.registrationTime.length)}),$("#noCarBrand").on("click",function(){var e=this;e.checked?($(e).parent().addClass("selected"),$("#ppBrandYearLists").siblings("div").addClass("disabled"),a.value&&(a.value=""),"block"===$("#ppBrandYearErrorInfo").parent().css("display")&&$("#ppBrandYearErrorInfo").parent().hide()):($(e).parent().removeClass("selected"),s.innerHTML&&$("#ppBrandYearLists").siblings("div").removeClass("disabled"))}),$("#ppTripDistance, #ppExpectedPrice, #ppPhoneNumber, #ppCode").on("blur",function(){var e,a,s=this;"ppTripDistance"===s.id?(e=checkFunctions.checkMile(s.value),a="请填写正确的行驶里程"):"ppExpectedPrice"===s.id?(e=checkFunctions.checkPrice(s.value),a="请填写正确的期望价格"):"ppPhoneNumber"===s.id?(e=checkFunctions.checkMobile(s.value),a="请填写正确的联系电话"):($("#"+s.id+"ErrorInfo").parent().removeClass("success"),e=checkFunctions.checkCode(s.value),a="请填写正确的验证码"),e?"block"===$("#"+s.id+"ErrorInfo").parent().css("display")&&$("#"+s.id+"ErrorInfo").parent().hide():(s.value||("ppTripDistance"===s.id?a="请填写行驶里程":"ppExpectedPrice"===s.id?a="请填写期望价格":"ppPhoneNumber"===s.id?a="请填写联系电话":($("#"+s.id+"ErrorInfo").parent().removeClass("success"),a="请填写验证码")),$("#"+s.id+"ErrorInfo").text(a).parent().show())}),$("#ppCarColorLists").on("click","li",function(){var e=this,a=$(e).hasClass("active"),s=$("#"+$(e).parent().attr("id")+"ErrorInfo").parent();a||$(e).addClass("active").siblings("li").removeClass("active"),"block"===s.css("display")&&s.hide()}),$("#ppOwnerDescription").on("input",function(){var e=this;$("#ppOwnerDescriptionNum").empty().text(e.value.length)}).on("blur",function(){var e=this,a=e.value.length;a>0&&a<10?$("#"+e.id+"ErrorInfo").parent().show():$("#"+e.id+"ErrorInfo").parent().hide()}),$("#ppSubmit, #ppSendCodeBtn").on("click",function(){var a,s,i,r,l,o,n=this;for("ppSubmit"===n.id&&googleAnalytics.sendGA("信息提交","个人发车页","提交"),a=0;a<PersonalPublich.checkLists.length;a+=1)if(s=checkFunctions.checkInput($("#"+PersonalPublich.checkLists[a]).val(),$("#"+PersonalPublich.checkLists[a]).attr("placeholder")),i=$("#"+PersonalPublich.checkLists[a]+"ErrorInfo").parent().css("display"),r=$("#"+PersonalPublich.checkLists[a]+"ErrorInfo").parent().parent().offset().top,l=$("#"+PersonalPublich.checkLists[a]+"ErrorInfo"),"ppBrandYear"!==PersonalPublich.checkLists[a]||!e.checked)if("ppCarColorLists"===PersonalPublich.checkLists[a]){var c=$("#ppCarColorLists li").hasClass("active");if(!c)return l.parent().show(),$(window).scrollTop(r/2),!1;if("block"===i)return $(window).scrollTop(r/2),!1}else if("ppCarPictureList"===PersonalPublich.checkLists[a]){if(PersonalPublich.uploadImages.length<PersonalPublich.PICLOWERLIMIT)return o="最少上传"+PersonalPublich.PICLOWERLIMIT+"张图片",0===PersonalPublich.uploadImages.length&&(o="请选择车辆照片"),l.text(o).parent().show(),$(window).scrollTop(r/2),!1}else if("ppOwnerDescription"===PersonalPublich.checkLists[a]){if("block"===i)return!1}else if("ppCode"===PersonalPublich.checkLists[a]){if("ppSubmit"===n.id){if(!s)return o="请填写验证码",l.text(o).parent().removeClass("success").show(),!1;if("block"===i)return!1}}else{if(!s)return $("#"+PersonalPublich.checkLists[a]+"ErrorInfo").parent().show(),"ppPhoneNumber"!==PersonalPublich.checkLists[a]&&$(window).scrollTop(r/2),!1;if("block"===i)return"ppPhoneNumber"!==PersonalPublich.checkLists[a]&&$(window).scrollTop(r/2),!1}if("ppSubmit"===n.id){var p,d=PersonalPublich.areaLocationId,u=PersonalPublich.carSeriesId,h=PersonalPublich.carSeriesModelId,P=$("#ppCarSeries").val(),m=$("#ppBrandYear").val(),b=$("#ppTripDistance").val(),C=$("#ppExpectedPrice").val(),g=$("#ppCarColorLists .active").attr("id"),f=PersonalPublich.uploadImagesSrc,I=PersonalPublich.uploadImagesHash,B=$("#ppCarPictureList .cover-pic").find("img").prop("src"),y=$("#ppOwnerDescription").val(),v=$("#ppPhoneNumber").val(),L=$("#ppCode").val();m&&(m=m.replace(/\D\s/,"").replace(/\D$/,""),m=5===m.length?m.replace(/(\d)$/,"-0$1"):m.replace(/(\d{2})$/,"-$1")),PersonalPublich.ppForm={areaLocationId:d,carSeriesId:u,carSeriesModelId:h,carSeriesName:P,registrationTime:m?m:"0000",mileage:b,expectedPrice:C,bodyColorId:g,photoSrc:f,photoHash:I,coverPhotoSrc:B?B.split("-smallpic")[0]:$("#ppCarPictureList").eq(0).find("img").prop("src").split("-smallpic")[0],ownerNote:y?y:"车主未附言",contactPhone:v,verificationCode:L,_jupiter:$("#shop_token").val()},ajaxFunctions.postData(IautosPC.config.address.pp_sendForm,PersonalPublich.ppForm,!1,function(e){"BU0001"===e.code?(p="Error",$("#personalPublish"+p).find(".close").addClass("refresh"),$("#personalPublish"+p).find(".tip-text").text(e.msg)):1===e.status?(p="Success",$("#personalPublish"+p).find(".close").addClass("success"),$("#personalPublishPhone").empty().text($("#ppPhoneNumber").val().replace(/\d{4}(?=\d{4}$)/,"****")),googleAnalytics.setGA("set","page","/fast_sendcar_success.html")):0===e.status&&("BSD004"===e.code?(p="Fail",googleAnalytics.setGA("set","page","/alreadyBusiness_message.html")):"BSD003"===e.code?(p="Full",googleAnalytics.setGA("set","page","/alreadyBusiness_message.html")):(p="Error",$("#personalPublish"+p).find(".tip-text").text(e.msg),googleAnalytics.setGA("set","page","/fast_sendcar_error/"+e.msg+".html"))),$(n).parent().addClass("unsubmit");setTimeout(function(){$(n).parent().removeClass("unsubmit")},3e3);$("#personalPublish"+p+",#alphaLayer").show()},function(){})}else ajaxFunctions.postData(IautosPC.config.address.pp_sendCode,"mobile="+$("#ppPhoneNumber").val()+"&_jupiter="+$("#shop_token").val(),!1,function(e){var a;if("BU0001"===e.code)a="Error",$("#personalPublish"+a).find(".close").addClass("refresh"),$("#personalPublish"+a).find(".tip-text").text(e.msg),$("#personalPublish"+a+",#alphaLayer").show();else if(1===e.status){PersonalPublich.count=58,$(n).hide(),$("#ppResendCodeBtn").show();var s=setInterval(function(){return 0===PersonalPublich.count||"0"===PersonalPublich.count?(clearInterval(s),$(n).show(),$("#ppResendCodeBtn").hide(),t.value="重发（59）",!1):(PersonalPublich.count<10&&(PersonalPublich.count="0"+PersonalPublich.count),t.value="重发（"+PersonalPublich.count+"）",void(PersonalPublich.count-=1))},1e3);$("#ppCodeErrorInfo").text("验证码发送成功!").parent().addClass("success").show();setTimeout(function(){$("#ppCodeErrorInfo").parent().removeClass("success").hide()},3e3)}else 0===e.status&&("BSD004"===e.code?(a="Fail",googleAnalytics.setGA("set","page","/alreadyBusiness_message.html")):"BSD003"===e.code?(a="Full",googleAnalytics.setGA("set","page","/alreadyBusiness_message.html")):(a="Error",$("#personalPublish"+a).find(".tip-text").text(e.msg),googleAnalytics.setGA("set","page","/fast_sendcar_error/"+e.msg+".html")),$("#personalPublish"+a+",#alphaLayer").show());$(n).parent().addClass("unclick");var s=setTimeout(function(){$(n).parent().removeClass("unclick")},3e3)},function(){})}),$("[id*=personalPublish]").on("click",".close",function(){var e=$(this).data("parent");$(this).hasClass("refresh")?window.location.reload(!0):$(this).hasClass("success")?window.location.href="/home/usedcar/manage/":$("#"+e+", #alphaLayer").hide(),"personalPublishSuccess"===e&&googleAnalytics.sendGA("成功发布更多按钮","个人发车页","查看和管理车源")}),$("#personalPublishFullLogin").on("click",function(){$("#personalPublishFull").hide(),$("#personalLoginBox").show()}),PersonalPublich.timer=setInterval(function(){ajaxFunctions.getData(IautosPC.config.address.pp_getPicFromMobile,"?pic_key="+$("#ppParameterFromMobile").val(),!1,function(e){if(1===e.status){var a,s="",i=Math.round(1e9*Math.random());if(0===PersonalPublich.uploadImages.length&&$("#ppCarPictureList").empty(),PersonalPublich.uploadImages.length+e.data.length<=PersonalPublich.PICUPPERLIMIT){for(a=0;a<e.data.length;a+=1)s+='<li class="real"><i class="close" data-index="" style="display:none"></i><span class="status"></span><div class="image"><img src="'+e.data[a][0]+'-mudiumpic" width="100%" /></div></li>',PersonalPublich.uploadImages.push(a),PersonalPublich.uploadImagesHash.push(e.data[a][1]),PersonalPublich.uploadImagesSrc.push(e.data[a][0]);$("#ppUploadPic").html('已成功添加<i class="count">'+PersonalPublich.uploadImages.length+"</i>张照片"),$("#ppCarPictureList").append(s)}else{if(PersonalPublich.uploadImages.length<PersonalPublich.PICUPPERLIMIT){var r=PersonalPublich.PICUPPERLIMIT-PersonalPublich.uploadImages.length;for(a=0;a<r;a+=1)s+='<li class="real"><i class="close" data-index="" style="display:none"></i><span class="status"></span><div class="image"><img src="'+e.data[a][0]+'-mudiumpic" width="100%" /></div></li>',PersonalPublich.uploadImages.push(a),PersonalPublich.uploadImagesHash.push(e.data[a][1]),PersonalPublich.uploadImagesSrc.push(e.data[a][0]);$("#ppUploadPic").html('已成功添加<i class="count">'+PersonalPublich.PICUPPERLIMIT+"</i>张照片"),$("#ppCarPictureList").append(s)}$("#ppCarPictureListErrorInfo").text("最多上传"+PersonalPublich.PICUPPERLIMIT+"张图片,已为您自动删除多余图片.").parent().show();setTimeout(function(){$("#ppCarPictureListErrorInfo").parent().hide()},3e3)}$("#qrCodeImg").prop("src",$("#qrCodeImg").prop("src")+"&maxwu="+i),$("#ppCarPictureList").dragsort({dragSelector:".real",dragEnd:function(){},dragBetween:!1,placeHolderTemplate:"<li style='border:1px dashed #cccccc'></li>"})}},function(){})},6e3),$("[id*=personalPublish]").on("click","a",function(){var e=$(this).parents(".tooltip").prop("id");e.match("Success")?googleAnalytics.sendGA("成功发布更多按钮","个人发车页","查看和管理车源"):e.match("Fail")?googleAnalytics.sendGA("已是商户提示按钮","个人发车页","登录发车"):e.match("Full")&&googleAnalytics.sendGA("库存已满页面个人中心按钮","个人发车页","去个人管理中心管理库存")})});